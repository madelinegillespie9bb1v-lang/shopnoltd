import { precompileTemplate } from "@ember/template-compilation";
export default precompileTemplate("{{#if this.loading}}\n  {{hide-application-footer}}\n{{/if}}\n\n{{body-class \"search-page\"}}\n\n<section class=\"search-container\">\n  <div class=\"search-header\" role=\"search\">\n    <h1 class=\"search-page-heading\">\n      {{#if this.hasResults}}\n        <div class=\"result-count\" id=\"search-result-count\" aria-live=\"polite\">\n          {{html-safe this.resultCountLabel}}\n        </div>\n      {{else}}\n        {{i18n \"search.full_page_title\"}}\n      {{/if}}\n    </h1>\n    <div class=\"search-bar\">\n      <SearchTextField\n        @value={{this.searchTerm}}\n        @aria-label={{i18n \"search.search_term_label\"}}\n        @enter={{action \"search\" (hash collapseFilters=true)}}\n        @hasAutofocus={{this.hasAutofocus}}\n        @aria-controls=\"search-result-count\"\n        class=\"full-page-search search no-blur search-query\"\n      />\n      <ComboBox\n        @id=\"search-type\"\n        @value={{this.search_type}}\n        @content={{this.searchTypes}}\n        @onChange={{fn (mut this.search_type)}}\n        @options={{hash castInteger=true}}\n      />\n      <DButton\n        @action={{fn (action \"search\") (hash collapseFilters=true)}}\n        @icon=\"magnifying-glass\"\n        @label=\"search.search_button\"\n        @ariaLabel=\"search.search_button\"\n        @disabled={{this.searchButtonDisabled}}\n        class=\"btn-primary search-cta\"\n      />\n    </div>\n    {{#if this.usingDefaultSearchType}}\n      {{! context is only provided when searching from mobile view }}\n      {{#if this.context}}\n        <div class=\"search-context\">\n          <label>\n            <Input\n              @type=\"checkbox\"\n              name=\"searchContext\"\n              @checked={{this.searchContextEnabled}}\n            />\n            {{this.searchContextDescription}}\n          </label>\n        </div>\n      {{/if}}\n\n      <div class=\"search-filters\">\n        <SearchAdvancedOptions\n          @searchTerm={{readonly this.searchTerm}}\n          @onChangeSearchTerm={{fn (mut this.searchTerm)}}\n          @search={{action \"search\" (hash collapseFilters=true)}}\n          @searchButtonDisabled={{this.searchButtonDisabled}}\n          @expandFilters={{this.expandFilters}}\n        />\n      </div>\n    {{/if}}\n\n    <div class=\"search-notice\">\n      {{#if this.invalidSearch}}\n        <div class=\"fps-invalid\">\n          {{i18n \"search.too_short\"}}\n        </div>\n      {{/if}}\n    </div>\n\n  </div>\n\n  <div class=\"search-advanced\">\n    <PluginOutlet\n      @name=\"full-page-search-below-search-header\"\n      @connectorTagName=\"div\"\n      @outletArgs={{hash\n        search=this.searchTerm\n        type=this.search_type\n        model=this.model\n        addSearchResults=this.addSearchResults\n        sortOrder=this.sortOrder\n      }}\n    />\n\n    {{#if this.hasResults}}\n      {{#if this.usingDefaultSearchType}}\n        <div\n          class={{this.searchInfoClassNames}}\n          role=\"region\"\n          ariaLabel={{i18n \"search.sort_or_bulk_actions\"}}\n        >\n          {{#if this.canBulkSelect}}\n            <DButton\n              @icon=\"list\"\n              @title=\"topics.bulk.toggle\"\n              @action={{action \"toggleBulkSelect\"}}\n              class=\"btn-default bulk-select\"\n            />\n            {{#if this.bulkSelectHelper.selected}}\n              <TopicList::TopicBulkSelectDropdown\n                @bulkSelectHelper={{this.bulkSelectHelper}}\n                @afterBulkActionComplete={{this.afterBulkActionComplete}}\n              />\n            {{/if}}\n          {{/if}}\n\n          {{#if this.bulkSelectEnabled}}\n            {{#if this.hasUnselectedResults}}\n              <DButton\n                @icon=\"square-check\"\n                @action={{action \"selectAll\"}}\n                @label=\"search.select_all\"\n                class=\"btn-default bulk-select-all\"\n              />\n            {{/if}}\n\n            {{#if this.hasSelection}}\n              <DButton\n                @icon=\"far-square\"\n                @action={{action \"clearAll\"}}\n                @label=\"search.clear_all\"\n                class=\"btn-default bulk-select-clear\"\n              />\n            {{/if}}\n          {{/if}}\n\n          <div class=\"sort-by inline-form\">\n            <label>\n              {{i18n \"search.sort_by\"}}\n            </label>\n            <ComboBox\n              @value={{this.sortOrder}}\n              @content={{this.sortOrders}}\n              @onChange={{this.setSortOrder}}\n              @id=\"search-sort-by\"\n              @options={{hash castInteger=true}}\n            />\n          </div>\n        </div>\n      {{/if}}\n    {{/if}}\n\n    <span>\n      <PluginOutlet\n        @name=\"full-page-search-below-search-info\"\n        @connectorTagName=\"div\"\n        @outletArgs={{hash search=this.searchTerm}}\n      />\n    </span>\n\n    {{#if this.searching}}\n      {{loading-spinner size=\"medium\"}}\n    {{else}}\n      <div class=\"search-results\" role=\"region\">\n        <LoadMore @selector=\".fps-result\" @action={{action \"loadMore\"}}>\n          {{#if (or this.usingDefaultSearchType this.customSearchType)}}\n            <SearchResultEntries\n              @posts={{this.searchResultPosts}}\n              @bulkSelectEnabled={{this.bulkSelectEnabled}}\n              @selected={{this.bulkSelectHelper.selected}}\n              @highlightQuery={{this.highlightQuery}}\n              @searchLogId={{this.model.grouped_search_result.search_log_id}}\n            />\n\n            <ConditionalLoadingSpinner @condition={{this.loading}}>\n              {{#if this.error}}\n                <div class=\"warning\">\n                  {{this.error}}\n                </div>\n              {{/if}}\n\n              {{#unless this.hasResults}}\n                {{#if this.searchActive}}\n                  <h3>{{i18n \"search.no_results\"}}</h3>\n\n                  {{#if this.showSuggestion}}\n                    <div class=\"no-results-suggestion\">\n                      {{i18n \"search.cant_find\"}}\n                      {{#if this.canCreateTopic}}\n                        <a\n                          href\n                          {{on \"click\" (fn this.createTopic this.searchTerm)}}\n                        >{{i18n \"search.start_new_topic\"}}</a>\n                        {{#unless this.siteSettings.login_required}}\n                          {{i18n \"search.or_search_google\"}}\n                        {{/unless}}\n                      {{else}}\n                        {{i18n \"search.search_google\"}}\n                      {{/if}}\n                    </div>\n\n                    <GoogleSearch @searchTerm={{this.searchTerm}} />\n                  {{/if}}\n                {{/if}}\n              {{/unless}}\n\n              {{#if this.hasResults}}\n                <h3 class=\"search-footer\">\n                  {{#if\n                    this.model.grouped_search_result.more_full_page_results\n                  }}\n                    {{#if this.isLastPage}}\n                      {{i18n \"search.more_results\"}}\n                    {{/if}}\n                  {{else}}\n                    {{i18n \"search.no_more_results\"}}\n                  {{/if}}\n                </h3>\n              {{/if}}\n            </ConditionalLoadingSpinner>\n          {{else}}\n            <ConditionalLoadingSpinner @condition={{this.loading}}>\n              {{#if this.hasResults}}\n                {{#if this.model.categories.length}}\n                  <h4 class=\"category-heading\">\n                    {{i18n \"search.categories\"}}\n                  </h4>\n                  <div class=\"category-items\">\n                    {{#each this.model.categories as |category|}}\n                      {{category-link\n                        category\n                        extraClasses=\"fps-category-item\"\n                      }}\n                    {{/each}}\n                  </div>\n                {{/if}}\n\n                {{#if this.model.tags.length}}\n                  <h4 class=\"tag-heading\">\n                    {{i18n \"search.tags\"}}\n                  </h4>\n\n                  <div class=\"tag-items\">\n                    {{#each this.model.tags as |tag|}}\n                      <div class=\"fps-tag-item\">\n                        <a href={{tag.url}}>\n                          {{tag.id}}\n                        </a>\n                      </div>\n                    {{/each}}\n                  </div>\n                {{/if}}\n\n                {{#if this.model.users}}\n                  <div class=\"user-items\">\n                    {{#each this.model.users as |user|}}\n                      <UserLink @user={{user}} class=\"fps-user-item\">\n                        {{avatar user imageSize=\"large\"}}\n\n                        <div class=\"user-titles\">\n                          {{#if user.name}}\n                            <span class=\"name\">\n                              {{user.name}}\n                            </span>\n                          {{/if}}\n\n                          <span class=\"username\">\n                            {{user.username}}\n                          </span>\n                        </div>\n                      </UserLink>\n                    {{/each}}\n                  </div>\n                {{/if}}\n              {{else}}\n                {{#if this.searchActive}}\n                  <h3>{{i18n \"search.no_results\"}}</h3>\n                {{/if}}\n              {{/if}}\n            </ConditionalLoadingSpinner>\n          {{/if}}\n        </LoadMore>\n      </div>\n    {{/if}}\n  </div>\n</section>",{ moduleName: "discourse/templates/full-page-search.hbs" })